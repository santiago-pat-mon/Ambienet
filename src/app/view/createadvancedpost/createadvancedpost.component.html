<div class="container" *ngIf="rol == 'user'">
    <mat-card class="cardContainer">
        <mat-card-content style="text-align: center">
            <section style="width: 100%; height: 40px;">
                <button mat-raised-button class="backButton" routerLink="/createpost" title="Volver a post normal">
                    <mat-icon>keyboard_backspace</mat-icon>
                </button>
            </section>
            <h2>Crea tu Post Avanzado</h2>
            <div>
                <mat-tab-group mat-align-tabs="center">
                    <mat-tab label="Mapa">
                        <p style="width: 80%; margin: auto; margin-top: 10px; margin-bottom: 10px;">
                            <b>Importante:</b> Por defecto tienes la ubicación de tu dispositivo,
                            pero si quieres poner una marca en un lugar distinto debes dar doble
                            Clic en la ubicación que desees del mapa. El botón “Ubicación del
                            dispositivo” pondrá la ubicación de tu dispositivo nuevamente.
                        </p>
                        <div class="mapContainerPost">
                            <agm-map [latitude]="myLatitude" [longitude]="myLongitude" [zoom]="zoom"
                                (mapReady)="mapReadyHandler($event)">
                                <agm-marker [latitude]="myLatitude" [longitude]="myLongitude">
                                    <agm-info-window>
                                        <strong>Ubicación</strong>
                                        <p><b>Latitud: </b>{{ myLatitude }}</p>
                                        <p><b>Longitud: </b>{{ myLongitude }}</p>
                                    </agm-info-window>
                                </agm-marker>
                            </agm-map>
                        </div>
                        <button mat-raised-button class="createsButton" (click)="selectDeviceLocation()">
                            Ubicación del dispositivo
                        </button>
                    </mat-tab>
                </mat-tab-group>
                <div style="margin-top: 20px">
                    <!-- <mat-form-field appearance="fill">
                        <mat-label>Fecha en que ocurrió el suceso*</mat-label>
                        <input matInput [matDatepicker]="picker" (dateChange)="getDate($event)" disabled>
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker disabled="false"></mat-datepicker>
                    </mat-form-field> -->
                    <form [formGroup]="advancedPostForm" (ngSubmit)="validateCredentialsPost(advancedPostForm)">
                        <mat-form-field>
                            <mat-label>Título</mat-label>
                            <input matInput type="text" formControlName="title" maxlength="50"
                                placeholder="Máximo 50 caracteres" required />
                            <mat-error *ngIf="advancedPostForm.controls.title.invalid">{{ getErrorMessage("title") }}
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Tipo de catástrofe</mat-label>
                            <mat-select matSelect formControlName="typeCatastrophe" required>
                                <mat-option value="Derrumbe">Derrumbe – Deslizamiento de tierra.
                                </mat-option>
                                <mat-option value="Ola_de_calor">Ola de calor</mat-option>
                                <mat-option value="Granizo">Granizo</mat-option>
                                <mat-option value="Sequía">Sequía</mat-option>
                                <mat-option value="Tormenta">Tormenta</mat-option>
                                <mat-option value="Erupción_volcánica">Erupción volcánica</mat-option>
                                <mat-option value="Incendio_forestal">Incendios forestales</mat-option>
                                <mat-option value="Inundación">Inundación</mat-option>
                                <mat-option value="Sismo">Sismo.</mat-option>
                                <mat-option value="Cuencas_hídricas">Contaminación de cuencas hídricas
                                </mat-option>
                                <mat-option value="Daño_por_petróleo">Derramamiento de petróleo</mat-option>
                                <mat-option value="Tala_de_bosques">Tala de bosques</mat-option>
                                <mat-option value="Minería_ilegal">Minería ilegal</mat-option>
                                <mat-option value="Otro">Otro</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Descripción</mat-label>
                            <textarea matInput type="text" rows="3" style="resize: none;" formControlName="description"
                                maxlength="255" placeholder="Máximo 255 caracteres" required></textarea>
                            <mat-error *ngIf="advancedPostForm.controls.description.invalid">{{
                                getErrorMessage("description")
                                }}
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Fenómeno Climático</mat-label>
                            <input matInput type="text" formControlName="climatic_phenomenon" maxlength="25"
                                placeholder="Máximo 25 caracteres" required />
                            <mat-error *ngIf="advancedPostForm.controls.climatic_phenomenon.invalid">{{
                                getErrorMessage("climatic_phenomenon") }}
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Intervalo de Tiempo en Minutos</mat-label>
                            <input matInput type="number" formControlName="time_interval" maxlength="10" required />
                            <mat-error *ngIf="advancedPostForm.controls.time_interval.invalid">{{
                                getErrorMessage("time_interval") }}
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Temperatura Máxima °C</mat-label>
                            <input matInput type="number" formControlName="temp_max" maxlength="5" required />
                            <mat-error *ngIf="advancedPostForm.controls.temp_max.invalid">{{
                                getErrorMessage("temp_max") }}
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Temperatura Mínima °C</mat-label>
                            <input matInput type="number" formControlName="temp_min" maxlength="5" required />
                            <mat-error *ngIf="advancedPostForm.controls.temp_min.invalid">{{
                                getErrorMessage("temp_min") }}
                            </mat-error>
                        </mat-form-field>
                        <p style="width: 90%; margin: auto; text-align: justify; margin-top: 10px; margin-bottom: 5px;">
                            <b>Importante:</b> Dado que se pueden
                            ingresar varias
                            afectaciones y riesgos, al momento de ingresar
                            una afectación o riesgo tienes que presionar Enter para que este quede registrado y cada vez
                            que
                            ingreses una nueva afectación o riesgo presiona Enter
                        </p>
                        <mat-form-field>
                            <mat-label>Afectaciones al Medio Ambiente</mat-label>
                            <mat-chip-list #chipList aria-label="Afectaciones">
                                <mat-chip *ngFor="let condition of conditions" [selectable]="selectable"
                                    [removable]="removable" (removed)="removeCondition(condition)">
                                    {{condition}}
                                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                                </mat-chip>
                                <input placeholder="Nueva afectación (Presiona Enter)..." #conditionInput
                                    [formControl]="conditionCtrl" [matChipInputFor]="chipList"
                                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                    (matChipInputTokenEnd)="addCondition($event)" />
                            </mat-chip-list>
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Riesgos Asociados</mat-label>
                            <mat-chip-list #chipList2 aria-label="Fruit selection">
                                <mat-chip *ngFor="let risk of risks" [selectable]="selectable2" [removable]="removable2"
                                    (removed)="removeRisk(risk)">
                                    {{risk}}
                                    <mat-icon matChipRemove *ngIf="removable2">cancel</mat-icon>
                                </mat-chip>
                                <input placeholder="Nuevo riesgo (Presiona Enter)..." #riskInput
                                    [formControl]="conditionCtrl" [matChipInputFor]="chipList2"
                                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes2"
                                    (matChipInputTokenEnd)="addRisk($event)" />
                            </mat-chip-list>
                        </mat-form-field>

                        <!-- Select file-->
                        <br />
                        <mat-label style="font-size: 15px">Foto del suceso</mat-label><br /><br />
                        <input #inputFile type="file" (change)="selectFile($event)" />
                        <br />
                        <br />
                        <button mat-raised-button class="createsButton">Crear</button>
                    </form>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
    <div style="width: 100%"></div>
</div>
<div *ngIf="rol == 'admin'">
    <div class="dataContainer">
        <p>Acceso restringido. No eres un usuario, eres un administrador.</p>
    </div>
</div>
<div *ngIf="rol == 'guest'">
    <div class="dataContainer">
        <p>Por favor regístrate para acceder a estas funcionalidades.</p>
        <button mat-raised-button class="createsButton" (click)="registerGuest()" hidden>
            Registrate
        </button>
    </div>
</div>